name: Community-Issue
on:
  issues:
    types: [opened]
jobs:
  community:
    runs-on: ubuntu-latest
    steps:
      - name: Is Longhorn Member
        uses: tspascoal/get-user-teams-membership@v1.0.4
        id: is-longhorn-member
        with:
          username: ${{ github.event.issue.user.login }}
          organization: yyz-field
          GITHUB_TOKEN: ${{ secrets.CUSTOM_GITHUB_TOKEN }}
      - name: Add To Community Project
        if: fromJSON(steps.is-longhorn-member.outputs.teams)[0] == null
        uses: alex-page/github-project-automation-plus@v0.8.1
        with:
          project: project1
          column: New
          repo-token: ${{ secrets.CUSTOM_GITHUB_TOKEN_2 }}
          action: add
